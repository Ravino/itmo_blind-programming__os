### Тюнинг ядра и GRUB

#### Цель работы
Познакомиться с параметрами ядра Linux и загрузчиком **GRUB**:
- понять, как ядро принимает параметры при старте системы;
- научиться проверять, какие параметры реально применяются;
- разобраться в назначении параметров производительности и безопасности.

---

#### Задание
1. Откройте файл `/etc/default/grub`.  
   - Найдите строки `GRUB_CMDLINE_LINUX_DEFAULT` и `GRUB_CMDLINE_LINUX`.  
   - Добавьте туда следующие параметры:
     ```
     intel_idle.max_cstate=0 noinvpcid nopcid nopti nospectre_v2 processor.max_cstate=1 apparmor=0
     ```
   - Объясните: почему параметры разделяются пробелом, а не запятой?

2. Обновите конфигурацию grub:  
````

sudo update-grub

```
или (в некоторых системах):  
```

sudo grub-mkconfig -o /boot/grub/grub.cfg

```

3. Перезагрузите систему.  
После загрузки проверьте:
- что реально применилось (`cat /proc/cmdline`);  
- какие параметры поддерживаются:
  - через директории `/sys/module/*/parameters/`;  
  - через содержимое `/proc/sys/*`.

4. Сравните список:  
- какие параметры реально учтены;  
- какие проигнорированы (ядро не знает или модуль отсутствует).  

5. Для каждого параметра объясните назначение:
- `intel_idle.max_cstate=0` — отключение энергосберегающих состояний процессора (C-states).  
- `processor.max_cstate=1` — ограничение глубины сна CPU через другой драйвер.  
- `noinvpcid`, `nopcid` — отключение оптимизаций TLB (связано с уязвимостями Spectre/Meltdown).  
- `nopti` — отключение Page Table Isolation (также связано с Meltdown).  
- `nospectre_v2` — отключение защиты от Spectre v2.  
- `apparmor=0` — отключение системы мандатного контроля AppArmor.

6. В отчёте (файл `analysis.md` или `README.md` в папке задачи) укажите:
- кусок вашего изменённого `/etc/default/grub`;  
- вывод `/proc/cmdline`;  
- вывод из `/sys/module/*/parameters/` по интересующим параметрам;  
- таблицу «параметр → поддерживается или нет → что означает».  

---

#### Пример оформления результата
```

## Проверка параметров

/etc/default/grub:
GRUB_CMDLINE_LINUX_DEFAULT="quiet splash intel_idle.max_cstate=0 noinvpcid nopcid nopti nospectre_v2 processor.max_cstate=1 apparmor=0"

После перезагрузки:

$ cat /proc/cmdline
BOOT_IMAGE=/boot/vmlinuz-6.1.0 root=/dev/sda1 ro quiet splash intel_idle.max_cstate=0 noinvpcid nopcid ...

| Параметр                | Поддерживается? | Назначение                             |
| ----------------------- | --------------- | -------------------------------------- |
| intel_idle.max_cstate=0 | да              | отключает C-states драйвера intel_idle |
| processor.max_cstate=1  | да              | ограничивает глубину сна CPU           |
| noinvpcid               | нет             | ядро не знает (старый параметр)        |
| apparmor=0              | да              | отключает AppArmor                     |
| ...                     |                 |                                        |

```

---

#### Критерии оценки
- Изменённый конфиг grub загружен в репозиторий.  
- Есть вывод `/proc/cmdline` и проверки `/sys/module/*/parameters/`.  
- Таблица «параметр → поддержка → назначение».  
- Пояснения по каждому параметру (зачем нужен, на что влияет).  
```


